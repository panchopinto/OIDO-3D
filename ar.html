
<!DOCTYPE html><html lang="es"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Realidad Aumentada — Oído</title>
<link rel="stylesheet" href="css/styles.css"/>
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head><body>
<svg width="0" height="0" style="position:absolute">
  <defs>
    <linearGradient id="g-blue" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#3b82f6"/></linearGradient>
    <linearGradient id="g-green" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#34d399"/><stop offset="100%" stop-color="#10b981"/></linearGradient>
    <linearGradient id="g-orange" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#fbbf24"/><stop offset="100%" stop-color="#f59e0b"/></linearGradient>
    <linearGradient id="g-purple" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#c084fc"/><stop offset="100%" stop-color="#8b5cf6"/></linearGradient>
  </defs>
</svg>
<svg width="0" height="0" style="position:absolute">
  <symbol id="ico-home" viewBox="0 0 24 24"><path fill="url(#g-purple)" d="M12 3l9 8h-3v9h-5v-6h-2v6H6v-9H3l9-8z"/></symbol>
  <symbol id="ico-3d" viewBox="0 0 24 24"><path fill="url(#g-blue)" d="M12 2l9 5v10l-9 5-9-5V7l9-5zm0 2.2L5 7v8l7 3.8 7-3.8V7L12 4.2z"/></symbol>
  <symbol id="ico-info" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none" stroke="url(#g-green)" stroke-width="2"/><path fill="url(#g-green)" d="M11 10h2v7h-2zM11 6h2v2h-2z"/></symbol>
  <symbol id="ico-ar" viewBox="0 0 24 24"><path fill="url(#g-orange)" d="M12 2l7 4v12l-7 4-7-4V6l7-4zm0 2.2L7 6.5v7l5 2.8 5-2.8v-7L12 4.2z"/></symbol>
</svg>

<div class="container">
<header class="header">
  <div class="brand"><div class="logo"><svg viewBox="0 0 24 24"><use href="#ico-ar"/></svg></div><h1>Realidad Aumentada — Oído</h1></div>
  <nav class="actions">
    <button id="themeToggle" class="theme-btn" type="button"><svg viewBox="0 0 24 24"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zM1 13h3v-2H1v2zm10-9h-2v3h2V4zm7.04.46l-1.41-1.41-1.8 1.79 1.41 1.41 1.8-1.79zM20 11v2h3v-2h-3zm-9 9h2v-3h-2v3zm6.24-1.84l1.8 1.79 1.41-1.41-1.79-1.8-1.42 1.42zM12 6a6 6 0 100 12 6 6 0 000-12z"/></svg></button>
    <a class="btn grad-purple" href="index.html"><span class="badge grad-d"><svg viewBox="0 0 24 24"><use href="#ico-home"/></svg></span> Inicio</a>
    <a class="btn grad-blue" href="scene-simple.html"><span class="badge grad-a"><svg viewBox="0 0 24 24"><use href="#ico-3d"/></svg></span> Vista 3D simple</a>
    <a class="btn grad-green" href="scene-info.html"><span class="badge grad-b"><svg viewBox="0 0 24 24"><use href="#ico-info"/></svg></span> 3D con información</a>
  </nav>
</header>
<section class="card">
  <mv-wrapper>
    <model-viewer src="assets/models/oido.glb" ios-src="assets/models/oido.usdz" ar ar-modes="webxr scene-viewer quick-look" ar-placement="floor" camera-controls touch-action="pan-y" ar-scale="fixed" shadow-intensity="0.5"></model-viewer>
  </mv-wrapper>
  <div class="ar-toolbar" id="arToolbar">
    <button class="ar-btn" id="arRotateL" title="Girar a la izquierda"><svg viewBox="0 0 24 24"><path fill="#93c5fd" d="M12 6v3l4-4-4-4v3A7 7 0 105 12H3a9 9 0 119 9v-2a7 7 0 100-13z"/></svg></button>
    <button class="ar-btn" id="arRotateR" title="Girar a la derecha"><svg viewBox="0 0 24 24"><path fill="#93c5fd" d="M12 6v3l4-4-4-4v3a9 9 0 11-9 9h2a7 7 0 107-7z"/></svg></button>
    <button class="ar-btn" id="arZoomIn" title="Aumentar tamaño"><svg viewBox="0 0 24 24"><path fill="#86efac" d="M11 6h2v5h5v2h-5v5h-2v-5H6v-2h5z"/></svg></button>
    <button class="ar-btn" id="arZoomOut" title="Disminuir tamaño"><svg viewBox="0 0 24 24"><path fill="#fcd34d" d="M6 11h12v2H6z"/></svg></button>
    <button class="ar-btn" id="arRecenter" title="Recolocar modelo"><svg viewBox="0 0 24 24"><path fill="#f0abfc" d="M12 5V3l-4 3 4 3V7a5 5 0 015 5h2a7 7 0 00-7-7zM5 12a7 7 0 007 7v2A9 9 0 013 12h2z"/></svg></button>
    <button class="ar-btn" id="arPlaceOn" title="Colocar aquí (tocar piso)"><svg viewBox="0 0 24 24"><path fill="#60a5fa" d="M12 2l4 7h-3v6h-2V9H8l4-7z"/><ellipse cx="12" cy="19" rx="6" ry="2.5" fill="#60a5fa" opacity=".5"/></svg></button>
    <button class="ar-btn" id="arPlaceOff" title="Listo"><svg viewBox="0 0 24 24"><path fill="#34d399" d="M9 16.2l-3.5-3.5L4 14.2 9 19l11-11-1.5-1.5z"/></svg></button>
    <button class="ar-btn" id="arHelpBtn" title="Ayuda / gestos"><svg viewBox="0 0 24 24"><path fill="#e879f9" d="M12 2a10 10 0 100 20 10 10 0 000-20zM11 10h2v7h-2zm0-4h2v2h-2z"/></svg></button>
  </div>
  <div class="ar-help" id="arHelp">Gestos: rotar con 1 dedo • escalar con 2 dedos • mover con 2 dedos (según modo). En Android (Scene Viewer) y iOS (Quick Look) los gestos son nativos. En WebXR, puedes tocar <strong>Colocar</strong> para ubicar el modelo.</div>
</section>
<footer class="footer">
  <small>Proyecto desarrollado por <strong>Belén Acuña</strong> y <strong>Francisco Pinto</strong>. Uso exclusivamente educativo. <strong>Prohibida</strong> su reproducción, copia o distribución total o parcial sin autorización. © 2025</small>
</footer>
</div>
<script>
(function(){
  const block = (e)=>{ e.preventDefault(); e.stopPropagation(); return false; };
  document.addEventListener('contextmenu', block, {capture:true});
  document.addEventListener('keydown', function(e){
    const k = e.key.toLowerCase();
    if (k === 'f12') return block(e);
    if (e.ctrlKey && e.shiftKey && ['i','j','c'].includes(k)) return block(e);
    if (e.ctrlKey && ['u','s','p'].includes(k)) return block(e);
  }, {capture:true});
})();
</script>

<script>
(function(){
  const mv=document.querySelector('model-viewer');
  const toolbar=document.getElementById('arToolbar');
  const help=document.getElementById('arHelp');
  let scale=1.0;
  function applyScale(v){ scale=Math.min(3,Math.max(0.2,v)); if(mv.model&&mv.model.modelScene){ const s=scale; mv.model.modelScene.scale.set(s,s,s);} }
  function rotateBy(d){ if(mv.model){ mv.model.rotation.y=(mv.model.rotation.y||0)+(d*Math.PI/180);} }
  document.getElementById('arRotateL').addEventListener('click',()=>rotateBy(-10));
  document.getElementById('arRotateR').addEventListener('click',()=>rotateBy(10));
  document.getElementById('arZoomIn').addEventListener('click',()=>applyScale(scale*1.12));
  document.getElementById('arZoomOut').addEventListener('click',()=>applyScale(scale/1.12));
  document.getElementById('arRecenter').addEventListener('click',()=>{ try{ mv.exitAR&&mv.exitAR(); }catch(e){} setTimeout(()=>{ try{ mv.activateAR&&mv.activateAR(); }catch(e){} },200); });
  document.getElementById('arHelpBtn').addEventListener('click',()=>help.classList.toggle('show'));
  function setPlacing(on){ mv.setAttribute('ar-placement', on?'interaction':'floor'); }
  document.getElementById('arPlaceOn').addEventListener('click',()=>setPlacing(true));
  document.getElementById('arPlaceOff').addEventListener('click',()=>setPlacing(false));
  let firstTap=false;
  mv.addEventListener('ar-status',ev=>{
    const st=ev.detail.status||mv.getAttribute('ar-status');
    if(st==='session-started'){ firstTap=false; setPlacing(true); toolbar.style.display='flex'; }
    else if(st==='not-presenting'||st==='failed'){ toolbar.style.display='flex'; }
    else { toolbar.style.display='none'; help.classList.remove('show'); }
  });
  mv.addEventListener('click',()=>{ if(!firstTap && mv.getAttribute('ar-placement')==='interaction'){ firstTap=true; setTimeout(()=>setPlacing(false),200); } },{passive:true});
  mv.addEventListener('load',()=>applyScale(1.0));
})();
</script>

<script>
(function(){
  const root = document.documentElement;
  const btn = document.getElementById('themeToggle');
  const saved = localStorage.getItem('theme');
  if(saved){ root.setAttribute('data-theme', saved); }
  btn && btn.addEventListener('click', ()=>{
    const cur = root.getAttribute('data-theme')==='light' ? 'dark':'light';
    root.setAttribute('data-theme', cur);
    localStorage.setItem('theme', cur);
  });
})();
</script>

</body></html>
